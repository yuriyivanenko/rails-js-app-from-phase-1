<%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand">
        <%= image_tag "logo-1.webp", id: "navbar-logo", width: 100, class: "d-inline-block align-top", alt: "GigaChad Logo" %>

      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" id="nav-link-scanner" href="#"><h5>Scanner</h5></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" id="nav-link-chart"><h5>Chart</h5></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" id="nav-link-wallet"><h5>Wallet</h5></a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- SCANNER VIEW -->
  <div class="container mt-5" id="scanner">
    <ul id="all-crypto-list">
    </ul>
  </div>
  <!-- CHART VIEW -->
  <div class="container mt-5" id="chart">
    <div id="chart-info">
      <h1>Please select a coin from the scanner to chart</h1>
    </div>
    <div>
      <canvas id="myChart"></canvas>
    </div>
  </div>
  <!-- WALLET VIEW -->
  <div class="container mt-5" id="wallet" data-controller="wallet">
    <div class="d-flex">
      <div class="col-5">
        <div class="card wallet-cards" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">Wallet</h5>
            <h6 class="card-subtitle mb-2 text-muted">Current cash available</h6>
            <p class="card-text" id="wallet-balance" data-wallet-target="walletBalance"></p>
          </div>
        </div>
          <button class="btn btn-primary my-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">Add funds</button>
        <div class="collapse" id="collapseExample">
          <div class="card card-body wallet-cards">
            <p>Add funds to wallet</p>

            <div class="input-group mb-3">
              <input data-wallet-target="addFunds" type="text" class="form-control" id="funds-input" placeholder="$ Rounded amount"  aria-describedby="button-addon2">
              <button data-action="click->wallet#add" class="btn btn-outline-secondary" type="button" id="add-funds-button">Submit</button>
            </div>

          </div>
        </div>
      </div>
      <div class="col-8">
        <div class="card transaction-card">
          <div class="card-body">
            <h5 class="card-title">Transaction Window</h5>
            <h6 class="card-subtitle mb-2 text-muted">Buy & Sell Crypto</h6>
            <div class="input-group mb-3" id="search-group">
              <span class="input-group-text" id="basic-addon1"><i class="bi bi-currency-bitcoin"></i></span>
              <input required type="text" class="form-control" id="crypto-search-input" placeholder="Enter Token Name"  aria-describedby="button-addon2">
              <button class="btn btn-outline-secondary" type="button" id="search-crypto-button">Get Price</button>
            </div>
            <p id="search-result">-</p>
            <div class="input-group mb-3" id="search-group">
              <span class="input-group-text" id="basic-addon1"><i class="bi bi-currency-dollar"></i></span>
              <input required ="text" class="form-control" id="crypto-buy-input" placeholder="USD amount to buy"  aria-describedby="button-addon2">
              <button class="btn btn-outline-secondary" type="button" id="buy-crypto-button">Buy</button>
            </div>
            <p id="tokens-amount">-</p>
            </div>
        </div>
      </div>
    </div>
    <!-- CURRENT HOLDINGS TABLE -->
    <h3 class="mt-3">Current Holdings</h3>
    <button id="refresh-holdings-button" class="btn btn-primary">Refresh</button>
    <table class="table mt-3" id="holdings-table">
      <thead>
        <tr>
          <th scope="col">Crypto Name</th>
          <th scope="col">Tokens Amount</th>
          <th scope="col">Market Price</th>
          <th scope="col">Current Value</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
      <!-- SELL MODAL -->
      <div class="modal fade" id="sellModal" tabindex="-1" aria-labelledby="sellModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="sellModalLabel">Sell</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p id="token-id"></p>
              <p id="token-market-price"></p>
              <p id="available-tokens"></p>
              <div class="input-group my-3" id="sell-group">
                <span class="input-group-text"><i class="bi bi-currency-dollar"></i></span>
                <input required ="text" class="form-control" id="crypto-sell-input" placeholder="Tokens to sell"  aria-describedby="button-addon2">
              </div>
            <p id="sale-value">-</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" id="sell_button">Sell</button>
            </div>
          </div>
        </div>
      </div>
  </div>
  <%= javascript_include_tag "index", "data-turbo-track": "false" %>
